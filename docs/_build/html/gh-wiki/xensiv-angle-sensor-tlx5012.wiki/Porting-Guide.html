<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Framework PAL Implementation &mdash; XENSIV TLx5012B Angle Sensor 2024 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=6fefd858"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/js/versionwarning.js?v=d4224a34"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            XENSIV TLx5012B Angle Sensor
              <img src="../../_static/ifx_logo_white_green_s.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Framework PAL Implementation</a></li>
<li><a class="reference internal" href="#framework-api-wrapper">Framework API Wrapper</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">XENSIV TLx5012B Angle Sensor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Framework PAL Implementation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/gh-wiki/xensiv-angle-sensor-tlx5012.wiki/Porting-Guide.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>Porting the library to a new software development framework and hardware platform entails the implementation of the corresponding GPIO and TIMER PAL classes.
In the following sections, some additional explanations and hints are provided:</p>
<section id="framework-pal-implementation">
<h1>Framework PAL Implementation<a class="headerlink" href="#framework-pal-implementation" title="Link to this heading"></a></h1>
<p>Implement the abstract PAL interface for you framework. The <strong>GPIO class</strong>, <strong>Timer class</strong> and <strong>SPIC class</strong> are mandatory.</p>
<p>The Doxygen comments on the <em>“src/pal/gpio.hpp”</em>, <em>“src/pal/timer.hpp”</em> and <em>“src/pal/spic.hpp”</em> describe the required behavior of each function of the <a class="reference internal" href="PAL-Interface.html"><span class="doc std std-doc">PAL Interface</span></a>.</p>
<p>Consider the existing framework implementations as reference examples for you design: <em>“/src/framework/sample_fmwk/pal”</em>. Some of the functions are optional depending on your framework and intended usage of the library.</p>
<p>That is the case of <em>init()</em> and <em>deinit()</em>, which take care of the hardware peripherals init/deinitialization. If this is done in your main application (or somewhere else outside the library), there is no need of delegating such initialization to the Hall Switch library. The definition of these functions can just be a return with the success return code.</p>
</section>
<section id="framework-api-wrapper">
<h1>Framework API Wrapper<a class="headerlink" href="#framework-api-wrapper" title="Link to this heading"></a></h1>
<p>The framework API wrapper implementation is optional, it is meant to ease the usage. Mostly the main help is to avoid the creation of the GPIO, Timer and SPI object instances for the developer.</p>
<p>To illustrate this approach, it is easier to evaluate a concrete implementation of the Arduino Wrapper implementation <em>“src/Tle5012B-ino.hpp/cpp”</em> (these files should be located under <em>“src/framework/arduino/wrapper/”</em>. More info <a class="reference internal" href="#Source-Tree-Structure#warning-exceptions"><span class="xref myst">here</span></a>):</p>
<ol class="arabic">
<li><p>Adapt the constructor arguments to those used for platform class creation (GPIO, Timer and SPI) in the new framework, using the native data types and structures. Hide what can be already defined for that platform and provide as much abstraction and simplicity as possible.</p>
<p>For example, the core library of the base constructor is defined like this:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Tle5012B</span><span class="p">();</span>
</pre></div>
</div>
<p>is wrapped for Arduino in three different settings like this:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Tle5012Ino</span><span class="p">();</span>
<span class="n">Tle5012Ino</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">csPin</span><span class="p">,</span><span class="w"> </span><span class="n">slaveNum</span><span class="w"> </span><span class="n">slave</span><span class="o">=</span><span class="n">TLE5012B_S0</span><span class="p">);</span>
<span class="n">Tle5012Ino</span><span class="p">(</span><span class="n">SPIClass3W</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bus</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">csPin</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">misoPin</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">mosiPin</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">sckPin</span><span class="p">,</span><span class="w"> </span><span class="n">slaveNum</span><span class="w"> </span><span class="n">slave</span><span class="o">=</span><span class="n">TLE5012B_S0</span><span class="p">);</span>
</pre></div>
</div>
<p>While it does not seems to simplify much in number of arguments, an Arduino developer can simply pass the pin number as argument, and does not need to deal with the (probably unknown) GPIO classes, neither specify further GPIO configuration as the mode (input, output, pull-up..), positive/negative logic, etc.</p>
<p>As for the constructor, the same philosophy can apply to other functions of the public API. In case of Arduino, as a hobbyist and makers environment, clarity and simplicity might prevail over configurability and functionality. Therefore, the <a class="reference internal" href="Arduino-API.html"><span class="doc std std-doc">wrapper API</span></a> further hides, group or eliminate certain functionalities.</p>
<p>For each ecosystem and framework, any other criteria can be chosen, hopefully matching as well its code conventions, implantation principles and paradigms.</p>
</li>
</ol>
<p>The following part does not apply to the <em>TLE9412</em> library as it is not used here but the framework concept allows
such definitions. So this part is only here for completeness. Please refer to other Infineon framework libraries like the <em>Hall Switch</em>
or the <em>High-Side Switch</em> which use this concept.</p>
<ol class="arabic" start="2">
<li><p>Define structs with the hardware configuration parameters pre-configured for the ported stacked eval kit based hardware platforms.
For existing hardware peripheral break-out boards and shields hardware connections with the base MCU evaluation boards, the GPIO ports (and the timer instances) might be are already fixed.</p>
<p>A constructor accepting as argument these predefined configuration can make life even easier to the library users.</p>
<p>Considering again the Arduino API as example, a Hall Switch constructor is provided which accepts <em>PlatformIno_t</em> structs:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">HallSwitchIno</span><span class="p">(</span><span class="n">PlatformIno_t</span><span class="w"> </span><span class="n">hwPlatf</span><span class="p">,</span>
<span class="w">              </span><span class="n">HallSwitch</span><span class="o">::</span><span class="n">CBack_t</span><span class="w">    </span><span class="n">cBack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
<p>Then, in <em>“src/frawework/Arduino/wrapper/hall-platf-ino.hpp”</em> some hardware platforms (the validated ones) are already provided:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">extern</span><span class="w"> </span><span class="n">PlatformIno_t</span><span class="w"> </span><span class="n">TLE4964_3M_S2Go_XMC2Go</span><span class="p">;</span><span class="w">        </span><span class="cm">/**&lt; TLE4964 3M Shield 2Go + XMC2Go Stack */</span>

<span class="k">extern</span><span class="w"> </span><span class="n">PlatformIno_t</span><span class="w"> </span><span class="n">TLE4964_3M_S2Go_ArduinoUno</span><span class="p">;</span><span class="w">    </span><span class="cm">/**&lt; TLE4964 3M Shield 2Go + MyIoT + Arduino Uno Form Factor */</span>

<span class="k">extern</span><span class="w"> </span><span class="n">PlatformIno_t</span><span class="w"> </span><span class="n">TLE4922_2GoKit</span><span class="p">;</span><span class="w">                </span><span class="cm">/**&lt; TLE4922 Kit 2Go  */</span>
</pre></div>
</div>
<p>Its definition can be found in the corresponding .cpp file.</p>
</li>
</ol>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Infineon Technologies AG.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #0A8276;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #0A8276;
    }

    /* span.caption-text {
      color: white;
    } */

    .wy-menu-vertical header, .wy-menu-vertical p.caption {
    color: white;
    height: 32px;
    display: inline-block;
    line-height: 32px;
    padding: 0 1.618em;
    margin: 12px 0 0 0;
    display: block;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 85%;
    white-space: nowrap;
    }

    /*
    .wy-side-nav-search>a, .wy-side-nav-search .wy-dropdown>a {
    color: #3a7ca8;
    font-size: 100%;
    font-weight: bold;
    display: inline-block;
    padding: 4px 6px;
    margin-bottom: .809em;
    }
    */
    
    .wy-menu-vertical header, .wy-menu-vertical p.caption {
    color: white;
    height: 32px;
    display: inline-block;
    line-height: 32px;
    padding: 0 1.618em;
    margin: 12px 0 0 0;
    display: block;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 85%;
    white-space: nowrap;
    }

    .rst-versions {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 300px;
    color: #fcfcfc;
    background: #6CB4AD;
    font-family: "Lato","proxima-nova", "Helvetica Neue", Arial,sans-serif;
    z-index: 400;
    justify-content: stretch;
    }

  </style>


</body>
</html>